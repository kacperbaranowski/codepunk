---
import { Menu, X } from '@lucide/astro';
---

<header id="header" class="fixed top-0 left-0 right-0 z-[1000] bg-bg border-b-4 border-black">
  <div class="container mx-auto px-6 md:px-12">
    <div class="flex items-center justify-between h-20 md:h-24">
      <!-- Logo -->
      <a href="#" class="flex items-center gap-3 group">
        <span class="font-bold text-2xl md:text-3xl tracking-tight">CODEPUNK</span>
        <span class="bg-secondary text-white px-2 py-1 text-xs font-bold tilt-right neo-border neo-shadow group-hover:bg-primary group-hover:text-black transition-colors">
          DEV
        </span>
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-8">
        <a href="#services" class="font-bold hover:text-secondary transition-colors">SERVICES</a>
        <a href="#projects" class="font-bold hover:text-secondary transition-colors">WORK</a>
        <a href="#contact" class="magnetic neo-border neo-shadow bg-primary px-6 py-3 font-bold hover:bg-secondary hover:text-white transition-colors">
          CONTACT
        </a>
      </nav>

      <!-- Mobile menu button -->
      <button id="menu-toggle" class="md:hidden neo-border neo-shadow bg-white w-14 h-14 flex items-center justify-center" aria-label="Toggle menu">
        <span id="icon-menu" class="block">
          <Menu size={28} strokeWidth={3} />
        </span>
        <span id="icon-close" class="hidden">
          <X size={28} strokeWidth={3} />
        </span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile menu -->
<div id="mobile-menu" class="mobile-menu md:hidden fixed inset-0 top-20 bg-primary z-[999]">
  <nav class="flex flex-col items-center justify-center h-full gap-8">
    <a href="#services" class="menu-link font-bold text-4xl hover:text-white transition-colors">SERVICES</a>
    <a href="#projects" class="menu-link font-bold text-4xl hover:text-white transition-colors">WORK</a>
    <a href="#contact" class="menu-link font-bold text-4xl neo-border neo-shadow bg-white px-8 py-4 hover:bg-secondary hover:text-white transition-colors">
      CONTACT
    </a>
  </nav>
</div>

<style>
  .mobile-menu {
    transform: translateX(100%);
    transition: transform 0.3s ease-out;
  }

  .mobile-menu.is-open {
    transform: translateX(0);
  }
</style>

<script is:inline>
  window.addEventListener('load', function() {
    var toggle = document.getElementById('menu-toggle');
    var menu = document.getElementById('mobile-menu');
    var iconMenu = document.getElementById('icon-menu');
    var iconClose = document.getElementById('icon-close');

    if (toggle && menu && iconMenu && iconClose) {
      toggle.addEventListener('click', function(e) {
        e.preventDefault();
        var isOpen = menu.classList.toggle('is-open');

        if (isOpen) {
          iconMenu.classList.add('hidden');
          iconClose.classList.remove('hidden');
        } else {
          iconMenu.classList.remove('hidden');
          iconClose.classList.add('hidden');
        }

        document.body.style.overflow = isOpen ? 'hidden' : '';
      });

      var links = menu.querySelectorAll('a');
      for (var i = 0; i < links.length; i++) {
        links[i].addEventListener('click', function() {
          menu.classList.remove('is-open');
          iconMenu.classList.remove('hidden');
          iconClose.classList.add('hidden');
          document.body.style.overflow = '';
        });
      }
    }
  });
</script>
