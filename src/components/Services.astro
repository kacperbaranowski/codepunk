---
// Services grid with neobrutalist cards
const services = [
  {
    title: "Next.js",
    description: "Lightning-fast React applications with server-side rendering, static generation, and the App Router.",
    color: "bg-primary",
    shadowColor: "neo-shadow-primary",
    tilt: "tilt-left",
    icon: "N"
  },
  {
    title: "React",
    description: "Interactive user interfaces with modern hooks, state management, and component architecture.",
    color: "bg-cyan",
    shadowColor: "neo-shadow-cyan",
    tilt: "tilt-right",
    icon: "R"
  },
  {
    title: "NestJS",
    description: "Scalable backend APIs with TypeScript, PostgreSQL, and enterprise-grade architecture.",
    color: "bg-secondary",
    shadowColor: "neo-shadow-secondary",
    tilt: "tilt-left",
    icon: "N"
  },
  {
    title: "WordPress",
    description: "Custom themes and plugins. No page builders, no bloat. Just clean, performant code.",
    color: "bg-lime",
    shadowColor: "neo-shadow-lime",
    tilt: "tilt-right",
    icon: "W"
  }
];
---

<section id="services" class="py-24 md:py-32 px-6 md:px-12 overflow-hidden">
  <div class="container mx-auto">
    <!-- Header -->
    <div class="mb-16 md:mb-24">
      <div class="overflow-hidden">
        <p class="services-line font-mono text-sm mb-4 translate-y-full">// WHAT I DO</p>
      </div>
      <div class="overflow-hidden">
        <h2 class="services-line text-5xl md:text-6xl lg:text-7xl font-bold translate-y-full">
          SERVICES
        </h2>
      </div>
    </div>

    <!-- Grid -->
    <div class="grid md:grid-cols-2 gap-8 md:gap-12">
      {services.map((service, i) => (
        <div
          class={`service-card neo-border ${service.shadowColor} ${service.color} p-8 md:p-10 ${service.tilt} hover:rotate-0 hover:scale-[1.02] transition-all duration-300 cursor-default opacity-0`}
          style={`--index: ${i}`}
        >
          <div class="flex items-start justify-between mb-6">
            <span class="neo-border neo-shadow bg-white w-16 h-16 flex items-center justify-center font-bold text-3xl">
              {service.icon}
            </span>
            <span class="font-mono text-sm">0{i + 1}</span>
          </div>
          <h3 class="text-3xl md:text-4xl font-bold mb-4">{service.title}</h3>
          <p class="text-lg opacity-80">{service.description}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Header lines
  gsap.to(".services-line", {
    y: 0,
    duration: 0.8,
    stagger: 0.1,
    ease: "power3.out",
    scrollTrigger: {
      trigger: "#services",
      start: "top 70%",
      toggleActions: "play none none reverse",
    },
  });

  // Cards with alternating slide directions
  const cards = document.querySelectorAll(".service-card");
  cards.forEach((card, i) => {
    const direction = i % 2 === 0 ? -100 : 100;

    gsap.fromTo(card,
      { x: direction, opacity: 0, rotate: i % 2 === 0 ? -5 : 5 },
      {
        x: 0,
        opacity: 1,
        rotate: i % 2 === 0 ? -2 : 2,
        duration: 0.8,
        ease: "power3.out",
        scrollTrigger: {
          trigger: card,
          start: "top 80%",
          toggleActions: "play none none reverse",
        },
      }
    );
  });
</script>
